<!DOCTYPE html>
<html>
<head>
	<title>Functional Modeling - MEttLE</title>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="./css/bootstrap.min.css">
	<link rel="stylesheet" href="./css/style-2.css">
	<!-- <link rel="stylesheet" href="./css/introjs.css"> -->
	<!-- <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"> -->
    <script src="go.js"></script>
  <!-- <link href="../assets/css/goSamples.css" rel="stylesheet" type="text/css" />  <!-- you don't need to use this -->
    <!-- this is only for the GoJS Samples framework -->
<!-- <link rel="stylesheet" type="text/css" href="stylesheet.css"> -->
<script src="Buttons.js"></script>
</head>

<section id="middlepart">
	<div class="top-section">
		<div class="row">
		<div class="col-sm-6" style="text-align:center;vertical-align:middle"> <p>MEttLE</p> </div>
		<div class="col-sm-1" style="text-align:center;vertical-align:middle">
		<a href="simultor/index.html" target="_blank"><input id="problem1funcmodel_sim" type="image" src="simulator.png" style="width:110px;height:67px;"/></a>
		</div>
		<div class="col-sm-1" style="text-align:center;vertical-align:middle">
		<a href="calc.html" target="_blank"><input id="problem1funcmodel_calc" type="image" src="calc.png" style="width:110px;height:67px;"/></a>
		</div>
		<div class="col-sm-1" style="text-align:center;vertical-align:middle">
		<a href="info.html" target="_blank"><input id="problem1funcmodel_info" type="image" src="info.png" style="width:110px;height:67px;"/></a>
		</div>
		<div class="col-sm-1" style="text-align:center;vertical-align:middle">
		<a href="scratch.html" target="_blank"><input  id="problem1funcmodel_scribble"type="image" src="scribble.png" style="width:110px;height:67px;"/></a>
		</div>
		<div class="col-sm-1" style="text-align:center;vertical-align:middle">
		<a href="problem1map.html" target="_blank"><input id="problem1funcmodel_map" type="image" src="map.png" style="width:110px;height:67px;"/></a>
		</div>
		<div class="col-sm-1" style="text-align:center"> <a href="logout.html"><button id="problem1funcmodel_logout" type="button" class="btn btn-default">Logout</button></a></div>
		</div>
	</div>
	<div class="register">
		<div class="container-fluid">
		<div class="row activity" style="text-align:center">
		<div class="col-lg-6">
		<!-- for the box on the right hand side with the various steps -->
		<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2520/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="580px" height="580px" viewBox="-30 -30 550 550"  xml:space="preserve">

		<polygon id="problem1funcmodel_create" points="0,250 0,500 125,375" onclick="openfunc()" class="current_subtask_map"/>
        <text x="10" y="375" class="current_subtask_text">Create a <tspan x="10" y="395"> statement </tspan> </text> <!-- here tspan is used to change the text position withing the polygon -->
		<polygon id="problem1funcmodel_eval" points="0,500 125,375 130,500" onclick="openfunceval()" class="subtask_map"/>
        <text x="50" y="470" class="subtask_text">Evaluate <tspan x="50" y="490"> its Utility </tspan></text>
		<polygon id="problem1funcmodel_plan" points="125,375 125,500 250,500" onclick="openfuncplan()" class="subtask_map"/>
        <text x="150" y="450" class="subtask_text">Plan <tspan x="150" y="470"> Next </tspan><tspan x="150" y="490"> Steps</tspan> </text>

		<polygon id="problem1funcmodel_task2" points="0,0 0,250 250,500 500,500" onclick="openqual()" class="task_map"/>
		<text x="80" y="300" class="task_text"> Qualitative Modeling </text>

		<polygon id="problem1funcmodel_task3" points="250,0 250,250 500,500 500,250" onclick="openquant()" class="task_map"/>
	    <text x="280" y="250" fill="#000000" font-size="18"> Quantitative Modeling </text>

		<polygon id="problem1funcmodel_task4" points="0,0 250,250 250,0" onclick="opencalc()" class="task_map"/>
		<text x="120" y="80" class="task_text"> Calculation  </text>

		<polygon id="problem1funcmodel_task5" points="250,0 500,250 500,0" onclick="openeval()" class="task_map"/>
		<text x="370" y="80" class="task_text">Evaluation </a></text>

		<text  x="-10" y="500" class="current_task_text" transform="rotate(-90 -10,500)"> Functional Modeling </text>
		<path id="problem1funcmodel_task1" d="M 0,250 L 0,500 L 250,500 Z" class="current_task_path"/>
        </svg>

	  </div>
		<div class="col-lg-6">
		<div class="row">
		<div class="col-lg-4 task"><!-- combining style-2 and bootstrap stylesheets-->
	    Task
		</div>
		<div class="col-lg-8 task_text">
		Functional Modeling
		</div> </div>
		<div class="row">
		<div class="col-lg-4 subtask">
			Sub-Task <br> 1 of 3
		</div>
		<div class="col-lg-8 subtask_text">
		Create the model: Focus question - "How does an electric car run?"
		</div>
		</div>
		<div class="row"> <br> </div>
		<div class="col-lg-12">
		<div class="row activity">
			<p style="font-size:12pt;"> To make a sentence answering this question, you may drag the <span style="background-color:#759EB8;color:white;">&nbspactions&nbsp</span>, <span style="background-color:#759EB8;color:white;">&nbspbehaviours&nbsp</span>, <span style="background-color:#426793;color:white;">&nbspparts of the system&nbsp</span> and <span style="background-color:#426793;color:white;">&nbspphysical parameters&nbsp</span> to the canvas and arrange them into a sentence. </p>
	</div></div>
		<!-- Includes the words that are drag-and-droppable and allows each word to have its own background color to differentaite between actions and parameters -->
			<div class="col-lg-12  drag-p connectedSortable" id="problem1funcmodel_actions">
			<span style="background-color:#759EB8;">&nbspruns&nbsp</span>
			<span style="background-color:#759EB8;">&nbspdrives&nbsp</span>
			<span style="background-color:#759EB8;">&nbsppushes&nbsp</span>
			<span style="background-color:#759EB8;">&nbsppowers&nbsp</span>
			<span style="background-color:#759EB8;">&nbspsupplies&nbsp</span>
			<span style="background-color:#759EB8;">&nbspuses&nbsp</span>
			<span style="background-color:#759EB8;">&nbspgenerates&nbsp</span>
			<span style="background-color:#759EB8;">&nbsprotates&nbsp</span>
			<span style="background-color:#759EB8;">&nbspmoves&nbsp</span>
			<span style="background-color:#759EB8;">&nbsphas&nbsp</span>
			<span style="background-color:#759EB8;">&nbspis&nbsp</span>
			<span style="background-color:#759EB8;">&nbspcontains&nbsp</span>
			<span style="background-color:#759EB8;">&nbspregulates&nbsp</span>
		<span style="background-color:#426793;">&nbspcar&nbsp</span>
		<span style="background-color:#426793;">&nbspbattery&nbsp</span>
		<span style="background-color:#426793;">&nbspmotor&nbsp</span>
<span style="background-color:#426793;">&nbspcontroller&nbsp</span>
<span style="background-color:#426793;">&nbspgears&nbsp</span>
		<span style="background-color:#426793;">&nbspwheel&nbsp</span>
		<span style="background-color:#426793;">&nbsptorque&nbsp</span>
		<span style="background-color:#426793;">&nbsppower&nbsp</span>
		<span style="background-color:#426793;">&nbspspeed&nbsp</span>
		<span style="background-color:#426793;">&nbspRPM&nbsp</span>
		<span style="background-color:#426793;">&nbspvoltage&nbsp</span>
		<span style="background-color:#426793;">&nbspcurrent&nbsp</span>
		<span style="background-color:#426793;">&nbspacceleration&nbsp</span>
		</div>
		<div class="col-lg-12" >
		 <p style="font-size:12pt;"> Drop the words below to make a sentence.</p>
		 </div>
		 <!-- the space into which the words can be drooped to make a sentence -->
		<div class="col-lg-12 connectedSortable" id="problem1funcmodel_dropa">

		</div>
		<!-- <div class="col-lg-12">
		<div class="row activity">
		<form action="problem1funceval.html">
		<fieldset>
			Enter the statement here:<br>
			<input id="problem1funcmodel_statement" type="text" name="func-model" size="85" ><br>
			<input id="problem1funcmodel_submit" type="submit" value="Submit">
		</fieldset>
		</form>
		</div>
		</div> -->
		<!-- <div class="row activity"> -->
		<!-- <button id="problem1funcmodel_see" type="button"> See your last saved model </button> -->
		<!-- <!-- Code for retreiving stored statement from db and displaying -->
		<!-- </div> -->
		<div class="row activity" style="text-align:center; font-size:12pt;">
		Enter the model statement below and save it
		<textarea id="problem1funcmodel_modeltxt" name="model" rows="3" cols="80"></textarea></br>
	    File name to save as: <input id="problem1funcmodel_FileNameToSaveAs"></input>
        <button onclick="saveTextAsFile()">Save</button> <br> <br>
        See your saved model <br>
         <input type="file" id="problem1funcmodel_fileToLoad">
        <button onclick="loadFileAsText()">Load Selected File</button> <br>
		<a href="problem1funceval.html"><button id="problem1funcmodel_next" type="button" class="btn btn-info"> Check if this is a useful model </button></a></p>
		</div>
		</div>
</div>
</div>
</div>
</section>
</body>
<!-- <footer style="position: relative; bottom: 0; background: #000;">
	<p>Â©2016   IDP in Educational Technology, Indian Institute of Technology Bombay, India</p>
</footer>
 --><!-- jQuery library -->
<script src="./js2/jquery-1.12.0.js"></script>

<!-- Latest compiled JavaScript -->
<script src="./js2/bootstrap.min.js"></script>

<!-- drag and drop js -->
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
<!-- <script>
  $( function() {
    $( "#problem1funcmodel_actions,#problem1funcmodel_parts, #problem1funcmodel_dropa, #problem1funcmodel_dropb, #problem1funcmodel_dropc, #problem1funcmodel_dropd" ).sortable({
      connectWith: ".connectedSortable"
    }).disableSelection();
  } );
  </script> -->
  <script>
  $( function() {
    $( "#problem1funcmodel_actions, #problem1funcmodel_dropa" ).sortable({
      connectWith: ".connectedSortable"
    }).disableSelection();
  } );
  //makes the elements in the divs problem1funcmodel_actions and problem1funcmodel_dropa draggable(i.e., the words(span elements))and the elements are disabled for selection(cannot select the text in the span elements)
  </script>
  <script>
// When the user hovers on <div>, open the popup
function myFunction() {
    document.getElementById("func_desc").style.visibility = "hidden";
    document.getElementById("func").style.visibility = "visible"
}
</script>
<!--  <rect id="popupbox" visibility="hidden" x="0" y="340" width="90" height="40" fill="gray"><set attributeName="visibility" from="hidden" to="visible" begin="problem1funcmodel_create.mouseover" end="problem1funcmodel_create.mouseout"/></rect><text id="thepopup" x="0" y="350" font-size="12" fill="white" visibility="hidden">How does an electric car run? <set attributeName="visibility" from="hidden" to="visible" begin="problem1funcmodel_create.mouseover" end="problem1funcmodel_create.mouseout"/> </text>
 -->
 <script>
 // opens the appropraiate html file, when the respective button is clicked, within the same page
function openfunc() {
    window.open("problem1funcmodel.html", target="_self");
}
</script>
 <script>
// opens the page when the respective svg is clicked
function openfunceval() {
    window.open("problem1funceval.html", target="_self");
}
</script>
 <script>
 // opens the page when the respective svg is clicked
function openfuncplan() {
    window.open("problem1funcplan.html", target="_self");
}
</script>
<script>
// opens the page when the respective svg is clicked
function openqual() {
    window.open("problem1qualmodel.html", target="_self");
}
</script>
<script>
// opens the page when the respective svg is clicked
function openquant() {
    window.open("problem1quantmodel.html", target="_self");
}
</script>
<script>
// opens the page when the respective svg is clicked
function opencalc() {
    window.open("problem1calc.html", target="_self");
}
</script>
<script>
// opens the page when the respective svg is clicked
function openeval() {
    window.open("problem1eval.html", target="_self");
}
</script>
 <script type="text/javascript">

// Save the contents to a text file.
function saveTextAsFile()
{
    var textToSave = document.getElementById("problem1funcmodel_modeltxt").value; // value entered in the textbox with id problem1funcmodel_modeltxt i.e the text area containg the model problem statement is stored in the variable textToSave
    var textToSaveAsBlob = new Blob([textToSave], {type:"text/plain"}); // creates a new blob file(textToSaveAsBlob) whose contents are the contents are the concatenation of the parameters of the constructor(contents of textToSave variable and type:...)
    var textToSaveAsURL = window.URL.createObjectURL(textToSaveAsBlob);// creates a string which contains a URL representing the textToSaveAsBlob file
    var fileNameToSaveAs = document.getElementById("problem1funcmodel_FileNameToSaveAs").value;//gets the filename of the file we want to save it as.
 //here we are creating an anchor element that is clicked and the blob file is downloaded onto the user's device and the link is then removed immediately
    var downloadLink = document.createElement("a");//creates an anchor element
    downloadLink.download = fileNameToSaveAs;// to specify that the file with name stored in fileNameToSaveAs  is to be downloaded
    downloadLink.innerHTML = "Download File";
    downloadLink.href = textToSaveAsURL;// the link to the file is specified
    downloadLink.onclick = destroyClickedElement;// destroyClickedElement is called once the link is clicked
    downloadLink.style.display = "none";//link cannot be seen by the user(hidden)
    document.body.appendChild(downloadLink);// adding the enchor element to the body of the document

    downloadLink.click();// the link is clicked so download of file will be in progress
}


function destroyClickedElement(event)
{
    document.body.removeChild(event.target); // removes the anchor element from the DOM
}

// load text file from user
function loadFileAsText()
{
    var fileToLoad = document.getElementById("problem1funcmodel_fileToLoad").files[0];//gets the file the user chooses and stores it in the variable fileToLoad

    var fileReader = new FileReader();//creates a filereader object that allows us to read contents of a file
    fileReader.onload = function(fileLoadedEvent) // function which is called when a file to read is selected
    {
        var textFromFileLoaded = fileLoadedEvent.target.result;// the contents of the file to be read is stored in the variable
        document.getElementById("problem1funcmodel_modeltxt").value = textFromFileLoaded;// the contents of the file are displayed in the div problem1funcmodel_modeltxt
    };
    fileReader.readAsText(fileToLoad, "UTF-8");//specifies the file to read(fileToLoad) and the character set to read
}

</script>
